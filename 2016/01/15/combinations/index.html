<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Generating and Sorting Subsequences | Nicholas&#39; Blag</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="The ChallengeWe recently received a code challenge similar to the following here at Coding House: Given a string str, generate a lexicographically sorted array containing all unique subsequences of st">
<meta property="og:type" content="article">
<meta property="og:title" content="Generating and Sorting Subsequences">
<meta property="og:url" content="https://babelthuap.github.io/blog/2016/01/15/combinations/index.html">
<meta property="og:site_name" content="Nicholas' Blag">
<meta property="og:description" content="The ChallengeWe recently received a code challenge similar to the following here at Coding House: Given a string str, generate a lexicographically sorted array containing all unique subsequences of st">
<meta property="og:image" content="https://babelthuap.github.io/blog/blog/css/images/PascalTriangle.jpg">
<meta property="og:updated_time" content="2016-01-16T22:11:24.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Generating and Sorting Subsequences">
<meta name="twitter:description" content="The ChallengeWe recently received a code challenge similar to the following here at Coding House: Given a string str, generate a lexicographically sorted array containing all unique subsequences of st">
  
  
  <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="/blog/css/style.css" type="text/css">
  
<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-72417130-1', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->


</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/blog" id="logo">Nicholas&#39; Blag</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/blog" id="subtitle">JavaScripter and Mathist</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="http://babelthuap.github.io/">My Homepage</a>
        
          <a class="main-nav-link" href="/blog/archives">Blog Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://babelthuap.github.io/blog"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-combinations" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog/2016/01/15/combinations/" class="article-date">
  <time datetime="2016-01-16T06:06:50.000Z" itemprop="datePublished">Jan 15th, 2016</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Generating and Sorting Subsequences
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><img src="/blog/css/images/PascalTriangle.jpg" alt="bonus kudos if you can figure out why this picture is relevant"></p>
<h2 id="The_Challenge"><a href="#The_Challenge" class="headerlink" title="The Challenge"></a>The Challenge</h2><p>We recently received a code challenge similar to the following here at <a href="https://codinghouse.co/" target="_blank" rel="external">Coding House</a>: <em>Given a string <code>str</code>, generate a lexicographically sorted array containing all unique subsequences of <code>str</code>.</em> Challenge accepted!</p>
<p>There are two parts to this problem: (1) generating the subsequences and (2) returning a sorted array. Although they will end up intertwined, I’ll treat them one at a time.</p>
<p>TL;DR &rarr; There’s a JS Bin sample of working code at the end of this post.</p>
<h2 id="Generating_The_Subsequences"><a href="#Generating_The_Subsequences" class="headerlink" title="Generating The Subsequences"></a>Generating The Subsequences</h2><p>A subsequence of <code>str</code> is generated by deleting one or more letters of <code>str</code> while keeping the others. For example, if <code>str</code> is <code>&#39;abcd&#39;</code>, then several (not all) subsequences are</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">'abcd'</span></span><br><span class="line"><span class="string">'b'</span></span><br><span class="line"><span class="string">'bd'</span></span><br><span class="line"><span class="string">'acd'</span></span><br></pre></td></tr></table></figure>
<p>The trick is to think of this as “which letters are we keeping vs. which are we throwing out?” Let’s rewrite each of the above subsequences taking note of which letters were kept from the original <code>str</code>:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">    a b c d       a b c d       a b c d       a b c d</span><br><span class="line">    <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span>       <span class="number">0</span> <span class="number">1</span> <span class="number">0</span> <span class="number">0</span>       <span class="number">0</span> <span class="number">1</span> <span class="number">0</span> <span class="number">1</span>       <span class="number">1</span> <span class="number">0</span> <span class="number">1</span> <span class="number">1</span></span><br><span class="line"></span><br><span class="line">-&gt;  a b c d         b             b   d       a   c d</span><br></pre></td></tr></table></figure>
<p>Aha! Each subsequence of <code>&#39;abcd&#39;</code> corresponds with a binary number between <code>0000</code> and <code>1111</code>. Thus, to generate all subsequences, we need only iterate through all numbers from 0 up through 2^4 - 1 and map each number to its corresponding subsequence. Let’s put that into code.</p>
<p>Our <code>for</code> loop will start at 0 and go up to 2^<em>n</em>. An easy way to calculate 2^<em>n</em> is with the expression <code>1 &lt;&lt; n</code>, using the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Bitwise_Operators" target="_blank" rel="external">bitshift operator</a>. On each iteration, we need to take the iteration variable (let’s call it <code>i</code>) and turn it into a binary string of the right length. We can convert <code>i</code> to binary with <code>i.toString(2)</code>, but this will output a string like so:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(<span class="number">0</span>).toString(<span class="number">2</span>) -&gt; <span class="string">"0"</span></span><br><span class="line">(<span class="number">3</span>).toString(<span class="number">2</span>) -&gt; <span class="string">"11"</span></span><br><span class="line">(<span class="number">5</span>).toString(<span class="number">2</span>) -&gt; <span class="string">"101"</span></span><br></pre></td></tr></table></figure>
<p>We want to pad this binary string with zeros. There are multiple ways to do this. I’ll use</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> padding = <span class="string">'0'</span>.repeat(str.length - <span class="number">1</span>); <span class="comment">// generate something like '000'</span></span><br><span class="line"><span class="keyword">var</span> binary = (padding + i.toString(<span class="number">2</span>)).slice(-str.length);</span><br></pre></td></tr></table></figure>
<p>The last piece of the puzzle is to map this string <code>binary</code> to the subsequence it represents. That’s fairly straightforward. We split <code>binary</code> into an array, map it, then join it:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">binary.split(<span class="string">''</span>).map((digit, index) =&gt; digit === <span class="string">'1'</span> ? str[index] : <span class="string">''</span>).join(<span class="string">''</span>)</span><br></pre></td></tr></table></figure>
<p>We can separate out the function inside <code>map</code> to make this operation more readable:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> binaryToSubseq = <span class="function"><span class="keyword">function</span>(<span class="params">digit, index</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> digit === <span class="string">'1'</span> ? str[index] : <span class="string">''</span>;</span><br><span class="line">&#125;;</span><br><span class="line">binary.split(<span class="string">''</span>).map(binaryToSubseq).join(<span class="string">''</span>); <span class="comment">// much nicer!</span></span><br></pre></td></tr></table></figure>
<h2 id="Sorting_The_Output_Array"><a href="#Sorting_The_Output_Array" class="headerlink" title="Sorting The Output Array"></a>Sorting The Output Array</h2><p>We’ve almost got a working piece of code! We just need to store the generated subsequences somewhere. An easy option is to use a <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set" target="_blank" rel="external">Set</a>, which will take care of uniqueness for us. When we’re done with the generating, we can just convert the Set to an Array, sort it, and return it. Let’s see what we have:</p>
<p><a class="jsbin-embed" href="http://jsbin.com/zulobe/embed?js" target="_blank" rel="external">JS Bin on jsbin.com</a><script src="http://static.jsbin.com/js/embed.min.js?3.35.9"></script></p>
<p>It works! Woohoo! Try it out.</p>
<p>However… we can do better. Basically, we want to maintain a sorted collection as we add subsequences. We need two things to do so efficiently: an algorithm and a suitable data structure. I’m thinking of binary insertion for the algorithm. But can you think of a suitable data structure? Arrays have linear insertion – that’s no good. Is there some kind of tree that will work? I’ll let you ponder that. :)</p>
<p><em>TO BE CONTINUED</em></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://babelthuap.github.io/blog/2016/01/15/combinations/" data-id="cijgtd6x40000yj2frhomoa4s" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/algorithms/">algorithms</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/combinatorics/">combinatorics</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/javascript/">javascript</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
  
    <a href="/blog/2016/01/13/permutations/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Generating All Permutations of an Array</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    <div class="widget-wrap">
  <h3 class="widget-title">About Me</h3>
  <div class="widget">
    <a href="http://babelthuap.github.io/"><img src="https://s.gravatar.com/avatar/c31c4c03a92468fed41bf63c62dd725b?s=188" width="94" alt="profile picture"></a>
    <p>
      My name is Nicholas Neumann-Chun. I'm a full-stack JavaScript developer with a math degree from <a href="http://www.williams.edu/">Williams College</a>. "About me" in six words: <strong>I like building things with code!</strong> I like playing with algorithms and solving puzzles. Moreover, I hope to build things that make the world a better place to live in. You can check out my personal homepage <a href="https://babelthuap.github.io/">here</a>, or find me on one of the following:
      <a href="https://github.com/babelthuap">GitHub</a>,
      <a href="https://twitter.com/Babelthuap">Twitter</a>,
      <a href="https://www.linkedin.com/in/nicholas-neumann-chun-953a12103">LinkedIn</a>,
      <a href="https://angel.co/nicholas-neumann-chun">Angel List</a>
    </p>
  </div>
</div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recents</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/blog/2016/01/15/combinations/">Generating and Sorting Subsequences</a>
          </li>
        
          <li>
            <a href="/blog/2016/01/13/permutations/">Generating All Permutations of an Array</a>
          </li>
        
          <li>
            <a href="/blog/2016/01/12/hello-hexo/">Hello, Hexo</a>
          </li>
        
          <li>
            <a href="/blog/2015/11/10/deploying-your-first-heroku-app/">Deploying Your First Heroku App</a>
          </li>
        
          <li>
            <a href="/blog/2015/11/09/first-hackathon-learning-teamwork/">First Hackathon: Learning Teamwork</a>
          </li>
        
      </ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/blog/tags/algorithms/" style="font-size: 13.33px;">algorithms</a> <a href="/blog/tags/coding-house/" style="font-size: 20px;">coding house</a> <a href="/blog/tags/combinatorics/" style="font-size: 13.33px;">combinatorics</a> <a href="/blog/tags/fibonacci/" style="font-size: 10px;">fibonacci</a> <a href="/blog/tags/hackathon/" style="font-size: 10px;">hackathon</a> <a href="/blog/tags/heroku/" style="font-size: 10px;">heroku</a> <a href="/blog/tags/javascript/" style="font-size: 16.67px;">javascript</a> <a href="/blog/tags/node/" style="font-size: 10px;">node</a> <a href="/blog/tags/recursion/" style="font-size: 10px;">recursion</a> <a href="/blog/tags/teaching/" style="font-size: 10px;">teaching</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2016/01/">January 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2015/11/">November 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2015/10/">October 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2015/09/">September 2015</a></li></ul>
    </div>
  </div>


  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2016 Nicholas Neumann-Chun<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="http://babelthuap.github.io/" class="mobile-nav-link">My Homepage</a>
  
    <a href="/blog/archives" class="mobile-nav-link">Blog Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/blog/fancybox/jquery.fancybox.css" type="text/css">
  <script src="/blog/fancybox/jquery.fancybox.pack.js" type="text/javascript"></script>


<script src="/blog/js/script.js" type="text/javascript"></script>

  </div>
</body>
</html>